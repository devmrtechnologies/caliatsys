{"version":3,"file":"caliatys-cognito-service.js.map","sources":["ng://@caliatys/cognito-service/lib/models/cognito-service-response.model.ts","ng://@caliatys/cognito-service/lib/enums/auth-type.enum.ts","ng://@caliatys/cognito-service/lib/enums/resp-type.enum.ts","ng://@caliatys/cognito-service/lib/cognito.service.ts"],"sourcesContent":["export class CognitoServiceResponse\n{\n  public type : string;\n  public data : any;\n\n  constructor(type : string, data : any)\n  {\n    this.type = type;\n    this.data = data;\n  }\n}","export enum AuthType\n{\n  COGNITO  = 'cognito',\n  GOOGLE   = 'google',\n  FACEBOOK = 'facebook'\n}\n","export enum RespType\n{\n  ON_SUCCESS                       = 'onSuccess',\n  ON_FAILURE                       = 'onFailure',\n  ON_ERROR                         = 'onError',\n  ON_TIMEOUT                       = 'onTimeout',\n  ON_REJECTED                      = 'onRejected',\n  NEW_PASSWORD_REQUIRED            = 'newPasswordRequired',\n  INPUT_VERIFICATION_CODE          = 'inputVerificationCode',\n  MFA_REQUIRED                     = 'mfaRequired',\n  MFA_SETUP_ASSOCIATE_SECRETE_CODE = 'mfaSetup associateSecretCode',\n  MFA_SETUP_ON_FAILURE             = 'mfaSetup onFailure',\n  EXPIRED_TOKEN                    = 'expiredToken'\n}\n","// Angular modules\nimport { Injectable }             from '@angular/core';\nimport { Inject }                 from '@angular/core';\nimport { Optional }               from '@angular/core';\nimport { EventEmitter }           from '@angular/core';\n\n// External modules\nimport * as AWSCognito            from 'amazon-cognito-identity-js';\nimport * as AWS                   from 'aws-sdk';\nimport * as awsservice            from 'aws-sdk/lib/service';\n\n// Models\nimport { CognitoServiceResponse } from './models/cognito-service-response.model';\n\n// Enums\nimport { AuthType }               from './enums/auth-type.enum';\nimport { RespType }               from './enums/resp-type.enum';\n\nexport enum GoogleAction\n{\n  AUTHENTICATE = 'authenticate',\n  REFRESH      = 'refresh',\n  LOGOUT       = 'logout'\n}\n\n@Injectable({\n  providedIn : 'root'\n})\nexport class CognitoService\n{\n  public  onSignIn          : EventEmitter<null>;\n  public  onSignOut         : EventEmitter<null>;\n\n  // private MFA              : boolean = false;\n\n  private storagePrefix    : string;\n\n  private googleId         : string;\n  private googleScope      : string;\n\n  private poolData : AWSCognito.ICognitoUserPoolData = {\n    UserPoolId : null, // CognitoUserPool\n    clientList   : null  // CognitoUserPoolClient\n  };\n\n  private identityPool     : string; // CognitoIdentityPool\n  private region           : string; // Region Matching CognitoUserPool region\n\n  private adminAccessKeyId : string;\n  private adminSecretKeyId : string;\n\n  private googleAuth       : gapi.auth2.GoogleAuth;\n  private cognitoUser      : AWSCognito.CognitoUser;\n\n  constructor\n  (\n    @Inject('cognitoConst') @Optional() public cognitoConst : any\n  )\n  {\n    this.onSignIn             = new EventEmitter();\n    this.onSignOut            = new EventEmitter();\n\n    this.storagePrefix       = cognitoConst.storagePrefix + '_CognitoService_';\n\n    this.googleId            = cognitoConst.googleId;\n    this.googleScope         = cognitoConst.googleScope;\n\n    this.poolData.UserPoolId = cognitoConst.poolData.UserPoolId;\n    this.poolData.clientList   = cognitoConst.poolData.clientList;\n\n    this.identityPool        = cognitoConst.identityPool;\n\n    this.region              = cognitoConst.region;\n    this.adminAccessKeyId    = cognitoConst.adminAccessKeyId;\n    this.adminSecretKeyId    = cognitoConst.adminSecretKeyId;\n  }\n\n  // -------------------------------------------------------------------------------------------\n  // SECTION: Helpers --------------------------------------------------------------------------\n  // -------------------------------------------------------------------------------------------\n\n  // NOTE: Misc --------------------------------------------------------------------------------\n\n  public isAuthenticated() : boolean\n  {\n    if (this.getRemaining())\n      return true;\n    return false;\n  }\n\n  public sts() : Promise<AWS.STS.GetCallerIdentityResponse | AWS.AWSError>\n  {\n    return new Promise((resolve, reject) =>\n    {\n      let sts = new AWS.STS();\n      let params : AWS.STS.GetCallerIdentityRequest = null;\n      sts.getCallerIdentity(params, (err : AWS.AWSError, data : AWS.STS.GetCallerIdentityResponse) =>\n      {\n        if (data)\n          return resolve(data);\n        console.error('CognitoService : sts -> getCallerIdentity', err);\n        return reject(err);\n      });\n    });\n  }\n\n  // NOTE: Session -----------------------------------------------------------------------------\n\n  public autoRefreshSession() : void\n  {\n    let expiresAt = this.getExpiresAt();\n    if (!expiresAt)\n      return;\n\n    let timeDiff = expiresAt.getTime() - Date.now() - 60000; // 1 min\n\n    if (timeDiff < 0)\n    {\n      this.signOut();\n      return;\n    }\n\n    setTimeout(() =>\n    {\n      // Refresh token\n      this.refreshSession().then(_ =>\n      {\n        this.autoRefreshSession();\n      }).catch(_ =>\n      {\n        this.signOut();\n      });\n    }, timeDiff);\n  }\n\n  public getRemaining() : number\n  {\n    let remaining : number = 0;\n    let now       : number = 0;\n    let max       : Date   = null;\n    now = Date.now();\n    max = this.getExpiresAt();\n\n    if (!max)\n      return null;\n    remaining = max.getTime() - now;\n    if (remaining <= 0)\n      return null;\n    return remaining;\n  }\n\n  public getExpiresAt() : Date\n  {\n    let storageKey   : string = null;\n    let expiresAtStr : string = null;\n    let expiresAtNum : number = null;\n    let expiresAtDat : Date   = null;\n    storageKey   = this.storagePrefix + 'ExpiresAt';\n    expiresAtStr = localStorage.getItem(storageKey);\n    if (expiresAtStr)\n    {\n      expiresAtNum = Number(expiresAtStr);\n      if (expiresAtNum)\n        expiresAtDat = new Date(expiresAtNum);\n    }\n    return expiresAtDat;\n  }\n\n  // NOTE: Username ----------------------------------------------------------------------------\n\n  public getUsername() : string\n  {\n    let storageKey : string = null;\n    let provider   : string = null;\n    storageKey = this.storagePrefix + 'Username';\n    provider   = localStorage.getItem(storageKey);\n    return provider;\n  }\n\n  // NOTE: Provider ----------------------------------------------------------------------------\n\n  public getProvider() : string\n  {\n    let storageKey : string = null;\n    let provider   : string = null;\n    storageKey = this.storagePrefix + 'Provider';\n    provider   = localStorage.getItem(storageKey);\n    return provider;\n  }\n\n  // NOTE: Token -------------------------------------------------------------------------------\n\n  public getIdToken() : string\n  {\n    let storageKey : string = null;\n    let idToken    : string = null;\n    storageKey = this.storagePrefix + 'IdToken';\n    idToken    = localStorage.getItem(storageKey);\n    return idToken;\n  }\n\n  public getTokens() : any\n  {\n    let storageKey : string = null;\n    let tokensStr  : string = null;\n    let tokensObj  : any    = null;\n    storageKey = this.storagePrefix + 'SessionTokens';\n    tokensStr  = localStorage.getItem(storageKey);\n    tokensObj  = JSON.parse(tokensStr);\n    return tokensObj;\n  }\n\n  // !SECTION\n\n  // -------------------------------------------------------------------------------------------\n  // SECTION: Credentials ----------------------------------------------------------------------\n  // -------------------------------------------------------------------------------------------\n\n  public initCredentials() : void\n  {\n    AWS.config.credentials = new AWS.CognitoIdentityCredentials({\n      IdentityPoolId : this.identityPool,\n    });\n    AWS.config.region = this.region;\n  }\n\n  public getCredentials() : Promise<any>\n  {\n    return new Promise((resolve, reject) =>\n    {\n      let credentials = AWS.config.credentials as any;\n      if (!credentials)\n      {\n        let error = 'You must initialize the credentials with initCredentials()';\n        console.error('CognitoService : getCredentials', error);\n        return reject(error);\n      }\n      credentials.get((err) =>\n      {\n        if (err)\n        {\n          console.error('CognitoService : getCredentials', err);\n          return reject(err);\n        }\n        return resolve(AWS.config.credentials);\n      });\n    });\n  }\n\n  public updateCredentials(clientConfig ?: awsservice.ServiceConfigurationOptions) : void\n  {\n    let url      : string = null;\n    let provider : string = null;\n    let idToken  : string = null;\n\n    provider = this.getProvider();\n    idToken  = this.getIdToken();\n\n    switch (provider)\n    {\n      case AuthType.COGNITO :\n        url = 'cognito-idp.' + this.region.toLowerCase() + '.amazonaws.com/' + this.poolData.UserPoolId;\n        break;\n      case AuthType.GOOGLE :\n        url = 'accounts.google.com';\n        break;\n      default :\n        console.error('CognitoService : setCredentials -> Provider not recognized');\n        return;\n    }\n\n    let logins : any = {};\n    logins[url] = idToken;\n\n    if (!this.identityPool)\n    {\n      console.info('We recommend that you provide an identity pool ID from a federated identity');\n      return;\n    }\n\n    let options : AWS.CognitoIdentityCredentials.CognitoIdentityOptions = {\n      IdentityPoolId : this.identityPool,\n      Logins         : logins\n    };\n\n    AWS.config.region      = this.region;\n    AWS.config.credentials = new AWS.CognitoIdentityCredentials(options, clientConfig);\n  }\n\n  // !SECTION\n\n  // -------------------------------------------------------------------------------------------\n  // SECTION: User -----------------------------------------------------------------------------\n  // -------------------------------------------------------------------------------------------\n\n  public getCognitoUser(username : string = null) : AWSCognito.CognitoUser\n  {\n    if (this.cognitoUser)\n      return this.cognitoUser; // User stored in the service\n\n    let cognitoUser : AWSCognito.CognitoUser = null;\n    let cognitoUserPool = new AWSCognito.CognitoUserPool(this.poolData);\n\n    cognitoUser = cognitoUserPool.getCurrentUser(); // Authenticated user\n\n    if (!cognitoUser)\n    {\n      let name : string = null;\n      if (username)\n        name = username; // User sent\n      else\n        name = this.getUsername(); // User stored in local storage\n      cognitoUser = this.setCognitoUser(name);\n    }\n\n    return cognitoUser;\n  }\n\n  public getUserAttributes() : any\n  {\n    let cognitoUser = this.getCognitoUser();\n    cognitoUser.getUserAttributes((err : Error, res : AWSCognito.CognitoUserAttribute[]) =>\n    {\n      if (res)\n        return res;\n      console.error('CognitoService : getUserAttributes -> getUserAttributes', err);\n    });\n  }\n\n  public deleteAttributes(attributeList : string[]) : any\n  {\n    let cognitoUser = this.getCognitoUser();\n    cognitoUser.deleteAttributes(attributeList, (err : Error, res : string) =>\n    {\n      if (res)\n        return res;\n      console.error('CognitoService : deleteAttributes -> deleteAttributes', err);\n    });\n  }\n\n  public getUserData() : any\n  {\n    let cognitoUser = this.getCognitoUser();\n    cognitoUser.getUserData((err : Error, res : AWSCognito.UserData) =>\n    {\n      if (res)\n        return res;\n      console.error('CognitoService : getUserData -> getUserData', err);\n    });\n  }\n\n  public deleteUser() : any\n  {\n    let cognitoUser = this.getCognitoUser();\n    cognitoUser.deleteUser((err : Error, res : string) =>\n    {\n      if (res)\n        return res;\n      console.error('CognitoService : deleteUser -> deleteUser', err);\n    });\n  }\n\n  // !SECTION\n\n  // -------------------------------------------------------------------------------------------\n  // SECTION: Registration ---------------------------------------------------------------------\n  // -------------------------------------------------------------------------------------------\n\n  /**\n   * Register a new user\n   *\n   * @param username\n   * @param password\n   * @param userAttributes - Optional parameter\n   * @param validationData - Optional parameter\n   */\n  public signUp(username : string, password : string, userAttributes : AWSCognito.CognitoUserAttribute[] = [], validationData : AWSCognito.CognitoUserAttribute[] = []) : Promise<CognitoServiceResponse>\n  {\n    let userPool = new AWSCognito.CognitoUserPool(this.poolData);\n\n    return new Promise((resolve, reject) =>\n    {\n      userPool.signUp(username, password, userAttributes, validationData, (err : Error, res : AWSCognito.ISignUpResult) =>\n      {\n        if (res)\n        {\n          this.setUsername(username);\n          let response = new CognitoServiceResponse(RespType.ON_SUCCESS, res);\n          return resolve(response);\n        }\n        console.error('CognitoService : signUp -> signUp', err);\n        let response = new CognitoServiceResponse(RespType.ON_FAILURE, err);\n        return reject(response);\n      });\n    });\n  }\n\n  /**\n   * Confirm the signUp action\n   *\n   * @param verificationCode\n   * @param forceAliasCreation - Optional parameter\n   */\n  public confirmRegistration(verificationCode : string, forceAliasCreation : boolean = false) : Promise<CognitoServiceResponse>\n  {\n    let cognitoUser = this.getCognitoUser();\n\n    return new Promise((resolve, reject) =>\n    {\n      cognitoUser.confirmRegistration(verificationCode, forceAliasCreation, (err : any, res : any) =>\n      {\n        if (res)\n        {\n          let response = new CognitoServiceResponse(RespType.ON_SUCCESS, res);\n          return resolve(response);\n        }\n        console.error('CognitoService : confirmRegistration -> confirmRegistration', err);\n        let response = new CognitoServiceResponse(RespType.ON_FAILURE, err);\n        return reject(response);\n      });\n    });\n  }\n\n  /**\n   * Resend the signUp confirmation code\n   */\n  public resendConfirmationCode() : Promise<CognitoServiceResponse>\n  {\n    let cognitoUser = this.getCognitoUser();\n\n    return new Promise((resolve, reject) =>\n    {\n      cognitoUser.resendConfirmationCode((err : Error, res : string) =>\n      {\n        if (res)\n        {\n          let response = new CognitoServiceResponse(RespType.ON_SUCCESS, res);\n          return resolve(response);\n        }\n        console.error('CognitoService : resendConfirmationCode -> resendConfirmationCode', err);\n        let response = new CognitoServiceResponse(RespType.ON_FAILURE, err);\n        return reject(response);\n      });\n    });\n  }\n\n  // !SECTION\n\n  // -------------------------------------------------------------------------------------------\n  // SECTION: MFA ------------------------------------------------------------------------------\n  // -------------------------------------------------------------------------------------------\n\n  /**\n   * Login 2nd step for users with MFA enabled\n   *\n   * @param mfaCode\n   * @param mfaType - Optional parameter (SOFTWARE_TOKEN_MFA / SMS_MFA)\n   */\n  public sendMFACode(mfaCode : string, mfaType : string = null) : Promise<CognitoServiceResponse>\n  {\n    // TODO: dynamic code\n    // SOFTWARE_TOKEN_MFA\n    // SMS_MFA\n    let cognitoUser = this.getCognitoUser();\n    return new Promise((resolve, reject) =>\n    {\n      cognitoUser.sendMFACode(mfaCode,\n      {\n        onSuccess : (session : AWSCognito.CognitoUserSession) =>\n        {\n          this.setUsername(cognitoUser.getUsername());\n          this.updateTokens(session);\n          this.setProvider(AuthType.COGNITO);\n          this.updateCredentials();\n\n          this.onSignIn.emit();\n          let response = new CognitoServiceResponse(RespType.ON_SUCCESS, session);\n          return resolve(response);\n        },\n        onFailure : (err : any) =>\n        {\n          console.error('CognitoService : sendMFACode -> sendMFACode', err);\n          let response = new CognitoServiceResponse(RespType.ON_FAILURE, err);\n          return reject(response);\n        }\n      }, mfaType);\n    });\n  }\n\n  /**\n   * Return the user's MFA status\n   */\n  public getMFAOptions() : Promise<CognitoServiceResponse>\n  {\n    let cognitoUser = this.getCognitoUser();\n\n    return new Promise((resolve, reject) =>\n    {\n      cognitoUser.getMFAOptions((err : Error, res : AWSCognito.MFAOption[]) =>\n      {\n        if (res)\n        {\n          let response = new CognitoServiceResponse(RespType.ON_SUCCESS, res);\n          return resolve(response);\n        }\n        console.error('CognitoService : getMFAOptions -> getMFAOptions', err);\n        let response = new CognitoServiceResponse(RespType.ON_FAILURE, err);\n        return reject(response);\n      });\n    });\n  }\n\n  /**\n   * Return the user's MFA status (must have a phone_number set)\n   *\n   * @param enableMfa\n   */\n  public setMfa(enableMfa : boolean) : Promise<CognitoServiceResponse>\n  {\n    let cognitoUser = this.getCognitoUser();\n\n    return new Promise((resolve, reject) =>\n    {\n      if (enableMfa)\n      {\n        cognitoUser.enableMFA((err : Error, res : string) =>\n        {\n          if (res)\n          {\n            let response = new CognitoServiceResponse(RespType.ON_SUCCESS, res);\n            return resolve(response);\n          }\n          console.error('CognitoService : setMfa -> enableMFA', err);\n          let response = new CognitoServiceResponse(RespType.ON_FAILURE, err);\n          return reject(response);\n        });\n      }\n      else\n      {\n        cognitoUser.disableMFA((err : Error, res : string) =>\n        {\n          if (res)\n          {\n            let response = new CognitoServiceResponse(RespType.ON_SUCCESS, res);\n            return resolve(response);\n          }\n          console.error('CognitoService : setMfa -> disableMFA', err);\n          let response = new CognitoServiceResponse(RespType.ON_FAILURE, err);\n          return reject(response);\n        });\n      }\n    });\n  }\n\n  // !SECTION\n\n  // -------------------------------------------------------------------------------------------\n  // SECTION: Password -------------------------------------------------------------------------\n  // -------------------------------------------------------------------------------------------\n\n  /**\n   * Set a new password on the first connection (if a new password is required)\n   *\n   * @param newPassword\n   * @param requiredAttributeData - Optional parameter\n   */\n  public newPasswordRequired(newPassword : string, requiredAttributeData : any = {}) : Promise<CognitoServiceResponse>\n  {\n    let cognitoUser = this.getCognitoUser();\n\n    return new Promise((resolve, reject) =>\n    {\n      cognitoUser.completeNewPasswordChallenge(newPassword, requiredAttributeData,\n      {\n        onSuccess : (session : AWSCognito.CognitoUserSession) =>\n        {\n          this.updateTokens(session);\n          let response = new CognitoServiceResponse(RespType.ON_SUCCESS, session);\n          return resolve(response);\n        },\n        onFailure : (err : any) =>\n        {\n          console.error('CognitoService : newPasswordRequired -> completeNewPasswordChallenge', err);\n          let response = new CognitoServiceResponse(RespType.ON_FAILURE, err);\n          return reject(response);\n        },\n        mfaRequired : (challengeName : any, challengeParameters : any) =>\n        {\n          let response = new CognitoServiceResponse(RespType.MFA_REQUIRED, { challengeName : challengeName, challengeParameters : challengeParameters });\n          return resolve(response);\n        }\n      });\n    });\n  }\n\n  /**\n   * Initiate forgot password flow\n   *\n   * @param username\n   */\n  public forgotPassword(username : string) : Promise<CognitoServiceResponse>\n  {\n    let cognitoUser = this.setCognitoUser(username);\n\n    return new Promise((resolve, reject) =>\n    {\n      cognitoUser.forgotPassword(\n      {\n        onSuccess : (data : any) =>\n        {\n          // NOTE: onSuccess is called if there is no inputVerificationCode callback\n          // NOTE: https://github.com/amazon-archives/amazon-cognito-identity-js/issues/324\n          // NOTE: https://github.com/amazon-archives/amazon-cognito-identity-js/issues/323\n          let response = new CognitoServiceResponse(RespType.ON_SUCCESS, data);\n          return resolve(response);\n        },\n        onFailure : (err : Error) =>\n        {\n          console.error('CognitoService : forgotPassword -> forgotPassword', err);\n          let response = new CognitoServiceResponse(RespType.ON_FAILURE, err);\n          return reject(response);\n        },\n        inputVerificationCode : (data : any) =>\n        {\n          let response = new CognitoServiceResponse(RespType.INPUT_VERIFICATION_CODE, data);\n          return resolve(response);\n        }\n      });\n    });\n  }\n\n  /**\n   * Resend the forgotPassword verification code\n   */\n  public getAttributeVerificationCode() : Promise<CognitoServiceResponse>\n  {\n    let cognitoUser = this.getCognitoUser();\n\n    return new Promise((resolve, reject) =>\n    {\n      let name : string = null;\n      cognitoUser.getAttributeVerificationCode(name,\n      {\n        onSuccess : () =>\n        {\n          let response = new CognitoServiceResponse(RespType.ON_SUCCESS, null);\n          return resolve(response);\n        },\n        onFailure : (err : Error) =>\n        {\n          console.error('CognitoService : getAttributeVerificationCode -> getAttributeVerificationCode', err);\n          let response = new CognitoServiceResponse(RespType.ON_FAILURE, err);\n          return reject(response);\n        },\n        inputVerificationCode : (data : string) =>\n        {\n          let response = new CognitoServiceResponse(RespType.INPUT_VERIFICATION_CODE, data);\n          return resolve(response);\n        }\n      });\n    });\n  }\n\n  /**\n   * Finish forgot password flow\n   *\n   * @param newPassword\n   * @param verificationCode\n   */\n  public confirmPassword(newPassword : string, verificationCode : string) : Promise<CognitoServiceResponse>\n  {\n    let cognitoUser = this.getCognitoUser();\n\n    return new Promise((resolve, reject) =>\n    {\n      cognitoUser.confirmPassword(verificationCode, newPassword,\n      {\n        onSuccess()\n        {\n          let response = new CognitoServiceResponse(RespType.ON_SUCCESS, null);\n          return resolve(response);\n        },\n        onFailure : (err : Error) =>\n        {\n          console.error('CognitoService : confirmPassword -> confirmPassword', err);\n          let response = new CognitoServiceResponse(RespType.ON_FAILURE, err);\n          return reject(response);\n        }\n      });\n    });\n  }\n\n  /**\n   * Update a user's password\n   *\n   * @param oldPassword\n   * @param newPassword\n   */\n  public changePassword(oldPassword : string, newPassword : string) : Promise<CognitoServiceResponse>\n  {\n    let cognitoUser = this.getCognitoUser();\n\n    return new Promise((resolve, reject) =>\n    {\n      cognitoUser.changePassword(oldPassword, newPassword, (err : Error, res : string) =>\n      {\n        if (res)\n        {\n          let response = new CognitoServiceResponse(RespType.ON_SUCCESS, res);\n          return resolve(response);\n        }\n        console.error('CognitoService : changePassword -> changePassword', err);\n        let response = new CognitoServiceResponse(RespType.ON_FAILURE, err);\n        return reject(response);\n      });\n    });\n  }\n\n  // !SECTION\n\n  // -------------------------------------------------------------------------------------------\n  // SECTION: Admin ----------------------------------------------------------------------------\n  // -------------------------------------------------------------------------------------------\n\n  public adminCreateUser(username : string, password : string) : Promise<AWS.AWSError | AWS.CognitoIdentityServiceProvider.AdminCreateUserResponse>\n  {\n    this.setAdmin();\n    let params : AWS.CognitoIdentityServiceProvider.AdminCreateUserRequest = {\n      UserPoolId        : this.poolData.UserPoolId,\n      Username          : username,\n      TemporaryPassword : password\n    };\n\n    let cognitoIdentityServiceProvider = new AWS.CognitoIdentityServiceProvider();\n\n    return new Promise((resolve, reject) =>\n    {\n      cognitoIdentityServiceProvider.adminCreateUser(params, (err : AWS.AWSError, res : AWS.CognitoIdentityServiceProvider.AdminCreateUserResponse) =>\n      {\n        if (res)\n          return resolve(res);\n        console.error('CognitoService : adminCreateUser -> adminCreateUser', err);\n        return reject(err);\n      });\n    });\n  }\n\n  public adminDeleteUser(username : string) : Promise<AWS.AWSError | any>\n  {\n    this.setAdmin();\n    let params : AWS.CognitoIdentityServiceProvider.AdminDeleteUserRequest = {\n      UserPoolId : this.poolData.UserPoolId,\n      Username   : username\n    };\n\n    let cognitoIdentityServiceProvider = new AWS.CognitoIdentityServiceProvider();\n\n    return new Promise((resolve, reject) =>\n    {\n      cognitoIdentityServiceProvider.adminDeleteUser(params, (err : AWS.AWSError, res : any) =>\n      {\n        if (res)\n          return resolve(res);\n        console.error('CognitoService : adminDeleteUser -> adminDeleteUser', err);\n        return reject(err);\n      });\n    });\n  }\n\n  public adminResetUserPassword(username : string) : Promise<AWS.AWSError | AWS.CognitoIdentityServiceProvider.AdminResetUserPasswordResponse>\n  {\n    this.setAdmin();\n    let params : AWS.CognitoIdentityServiceProvider.AdminResetUserPasswordRequest = {\n      UserPoolId : this.poolData.UserPoolId,\n      Username   : username\n    };\n\n    let cognitoIdentityServiceProvider = new AWS.CognitoIdentityServiceProvider();\n\n    return new Promise((resolve, reject) =>\n    {\n      cognitoIdentityServiceProvider.adminResetUserPassword(params, (err : AWS.AWSError, res : AWS.CognitoIdentityServiceProvider.AdminResetUserPasswordResponse) =>\n      {\n        if (res)\n          return resolve(res);\n        console.error('CognitoService : adminResetUserPassword -> adminResetUserPassword', err);\n        return reject(err);\n      });\n    });\n  }\n\n  public adminUpdateUserAttributes(username : string, userAttributes : AWS.CognitoIdentityServiceProvider.Types.AttributeListType) : Promise<AWS.AWSError | AWS.CognitoIdentityServiceProvider.AdminUpdateUserAttributesResponse>\n  {\n    this.setAdmin();\n    let params : AWS.CognitoIdentityServiceProvider.AdminUpdateUserAttributesRequest = {\n      UserPoolId     : this.poolData.UserPoolId,\n      Username       : username,\n      UserAttributes : userAttributes\n    };\n\n    let cognitoIdentityServiceProvider = new AWS.CognitoIdentityServiceProvider();\n\n    return new Promise((resolve, reject) =>\n    {\n      cognitoIdentityServiceProvider.adminUpdateUserAttributes(params, (err : AWS.AWSError, res : AWS.CognitoIdentityServiceProvider.AdminUpdateUserAttributesResponse) =>\n      {\n        if (res)\n          return resolve(res);\n        console.error('CognitoService : adminUpdateUserAttributes -> adminUpdateUserAttributes', err);\n        return reject(err);\n      });\n    });\n  }\n\n  public resetExpiredAccount(usernameKey : string, username : string) : Promise<AWS.AWSError | AWS.CognitoIdentityServiceProvider.AdminUpdateUserAttributesResponse>\n  {\n    let attributes : AWS.CognitoIdentityServiceProvider.AttributeType[] = [];\n    attributes.push({ Name : usernameKey, Value : username });\n    return this.adminUpdateUserAttributes(username, attributes);\n  }\n\n  public setAdmin() : void\n  {\n    let creds = new AWS.Credentials(this.adminAccessKeyId, this.adminSecretKeyId);\n    AWS.config.region      = this.region;\n    AWS.config.credentials = creds;\n  }\n\n  // !SECTION\n\n  // -------------------------------------------------------------------------------------------\n  // SECTION: Authentication -------------------------------------------------------------------\n  // -------------------------------------------------------------------------------------------\n\n  /**\n   * Connect an existing user\n   *\n   * @param provider - Use the AuthType enum to send an authorized authentication provider\n   * @param username\n   * @param password\n   */\n  public signIn(provider : string, username ?: string, password ?: string) : Promise<CognitoServiceResponse>\n  {\n    switch (provider)\n    {\n      case AuthType.COGNITO :\n        return this.authenticateCognitoUser(username, password);\n      case AuthType.GOOGLE :\n        return this.callGoogle(GoogleAction.AUTHENTICATE);\n      default :\n        let error = 'Provider not recognized : use the AuthType enum to send an authorized authentication provider';\n        console.error(error);\n        let response = new CognitoServiceResponse(RespType.ON_FAILURE, error);\n        return Promise.reject(response);\n    }\n  }\n\n  /**\n   * Refresh a user's session (retrieve refreshed tokens)\n   */\n  public refreshSession() : Promise<CognitoServiceResponse>\n  {\n    let provider : string = null;\n    provider = this.getProvider();\n\n    switch (provider)\n    {\n      case AuthType.COGNITO :\n        return this.refreshCognitoSession();\n      case AuthType.GOOGLE :\n        return this.callGoogle(GoogleAction.REFRESH);\n      default :\n        let error = 'Provider not recognized : the user must be logged in before updating the session';\n        console.error(error);\n        let response = new CognitoServiceResponse(RespType.ON_FAILURE, error);\n        return Promise.reject(response);\n    }\n  }\n\n  public signOut() : void\n  {\n    let provider : string = null;\n    provider = this.getProvider();\n\n    switch (provider)\n    {\n      case AuthType.COGNITO :\n        this.signOutCognito();\n        break;\n      case AuthType.GOOGLE :\n        this.callGoogle(GoogleAction.LOGOUT);\n        break;\n      default :\n        console.error('Provider not recognized : the user must be logged in before logging out');\n        break;\n    }\n\n    this.onSignOut.emit();\n    this.clearStorage();\n  }\n\n  // !SECTION\n\n  // -------------------------------------------------------------------------------------------\n  // SECTION: Cognito --------------------------------------------------------------------------\n  // -------------------------------------------------------------------------------------------\n\n  private authenticateCognitoUser(username : string, password : string) : Promise<CognitoServiceResponse>\n  {\n    let authenticationData : AWSCognito.IAuthenticationDetailsData = {\n      Username : username,\n      Password : password\n    };\n    let authenticationDetails = new AWSCognito.AuthenticationDetails(authenticationData);\n    let cognitoUser = this.getCognitoUser(username);\n\n    return new Promise((resolve, reject) =>\n    {\n      cognitoUser.authenticateUser(authenticationDetails,\n      {\n        newPasswordRequired : (userAttributes : any, requiredAttributes : any) =>\n        {\n          this.cognitoUser = cognitoUser; // NOTE: https://github.com/amazon-archives/amazon-cognito-identity-js/issues/365\n          let response = new CognitoServiceResponse(RespType.NEW_PASSWORD_REQUIRED, { userAttributes : userAttributes, requiredAttributes : requiredAttributes });\n          return resolve(response);\n        },\n        onSuccess : (session : AWSCognito.CognitoUserSession) =>\n        {\n          this.setUsername(username);\n          this.updateTokens(session);\n          this.setProvider(AuthType.COGNITO);\n          this.updateCredentials();\n\n          this.onSignIn.emit();\n          let response = new CognitoServiceResponse(RespType.ON_SUCCESS, session);\n          return resolve(response);\n        },\n        onFailure : (err) =>\n        {\n          console.error('CognitoService : authenticateCognitoUser -> authenticateUser', err);\n          let response = new CognitoServiceResponse(RespType.ON_FAILURE, err);\n          return reject(response);\n        },\n        mfaSetup : (challengeName : any, challengeParameters : any) =>\n        {\n          cognitoUser.associateSoftwareToken(\n          {\n            associateSecretCode : (secretCode : string) =>\n            {\n              let response = new CognitoServiceResponse(RespType.MFA_SETUP_ASSOCIATE_SECRETE_CODE, secretCode);\n              return resolve(response);\n            },\n            onFailure : (err) =>\n            {\n              let response = new CognitoServiceResponse(RespType.MFA_SETUP_ON_FAILURE, err);\n              return reject(response);\n            }\n          });\n        },\n        mfaRequired : (challengeName : any, challengeParameters : any) =>\n        {\n          let response = new CognitoServiceResponse(RespType.MFA_REQUIRED, { challengeName : challengeName, challengeParameters : challengeParameters });\n          return resolve(response);\n        }\n      });\n    });\n  }\n\n  private refreshCognitoSession() : Promise<CognitoServiceResponse>\n  {\n    let tokens       = this.getTokens();\n    let cognitoUser  = this.getCognitoUser();\n    let refreshToken = new AWSCognito.CognitoRefreshToken({ RefreshToken : tokens.refreshToken });\n\n    return new Promise((resolve, reject) =>\n    {\n      cognitoUser.refreshSession(refreshToken, (err : any, res : any) =>\n      {\n        if (res)\n        {\n          this.updateTokens(res);\n          this.updateCredentials();\n\n          let response = new CognitoServiceResponse(RespType.ON_SUCCESS, res);\n          return resolve(response);\n        }\n        console.error('CognitoService : refreshSession -> refreshSession', err);\n        let response = new CognitoServiceResponse(RespType.ON_FAILURE, err);\n        return reject(response);\n      });\n    });\n  }\n\n  private signOutCognito() : void\n  {\n    let cognitoUser = this.getCognitoUser();\n    if (cognitoUser)\n      cognitoUser.signOut();\n  }\n\n  // !SECTION\n\n  // -------------------------------------------------------------------------------------------\n  // SECTION: Google ---------------------------------------------------------------------------\n  // -------------------------------------------------------------------------------------------\n\n  private initGoogle() : Promise<CognitoServiceResponse>\n  {\n    let params  : gapi.auth2.ClientConfig = {\n      client_id : this.googleId,\n      scope     : this.googleScope\n    };\n\n    return new Promise((resolve, reject) =>\n    {\n      gapi.load('auth2',\n      {\n        callback  : _ =>\n        {\n          gapi.auth2.init(params).then((googleAuth : gapi.auth2.GoogleAuth) =>\n          {\n            this.googleAuth = googleAuth;\n            let response = new CognitoServiceResponse(RespType.ON_SUCCESS, googleAuth);\n            return resolve(response);\n          },\n          (reason : { error : string, details : string }) =>\n          {\n            console.error('CognitoService : initGoogle -> GoogleAuth', reason);\n            let response = new CognitoServiceResponse(RespType.ON_FAILURE, reason);\n            return reject(response);\n          });\n        },\n        onerror   : _ =>\n        { // Handle loading error\n          let error = 'gapi.client failed to load';\n          console.error('CognitoService : initGoogle -> load', error);\n          let response = new CognitoServiceResponse(RespType.ON_ERROR, error);\n          return reject(response);\n        },\n        timeout   : 5000, // 5 seconds\n        ontimeout : _ =>\n        { // Handle timeout\n          let error = 'gapi.client could not load in a timely manner';\n          console.error('CognitoService : initGoogle -> load', error);\n          let response = new CognitoServiceResponse(RespType.ON_TIMEOUT, error);\n          return reject(response);\n        }\n      });\n    });\n  }\n\n  private callGoogle(action : string) : Promise<CognitoServiceResponse>\n  {\n    if (this.googleAuth)\n    {\n      return this.makeGoogle(action);\n    }\n    else\n    {\n      return new Promise((resolve, reject) =>\n      {\n        this.initGoogle().then(_ =>\n        {\n          this.makeGoogle(action).then(res => resolve(res)).catch(err => reject(err));\n        }).catch(error =>\n        {\n          let response = new CognitoServiceResponse(RespType.ON_FAILURE, error);\n          return Promise.reject(response);\n        });\n      });\n    }\n  }\n\n  private makeGoogle(action : string) : Promise<CognitoServiceResponse>\n  {\n    switch (action)\n    {\n      case GoogleAction.AUTHENTICATE :\n        return this.authenticateGoogleUser();\n      case GoogleAction.REFRESH :\n        return this.refreshGoogleSession();\n      case GoogleAction.LOGOUT :\n        this.signOutGoogle();\n        let logoutResponse = new CognitoServiceResponse(RespType.ON_SUCCESS, null);\n        return Promise.resolve(logoutResponse);\n      default :\n        let error = 'Google action not recognized : authenticate / refresh / logout';\n        console.error(error);\n        let defaultResponse = new CognitoServiceResponse(RespType.ON_FAILURE, error);\n        return Promise.reject(defaultResponse);\n    }\n  }\n\n  private authenticateGoogleUser() : Promise<CognitoServiceResponse>\n  {\n    return new Promise((resolve, reject) =>\n    {\n      let options : gapi.auth2.SigninOptions = {\n        scope : this.googleScope\n      };\n      this.googleAuth.signIn(options).then((googleUser : gapi.auth2.GoogleUser) =>\n      {\n        let googleResponse = googleUser.getAuthResponse();\n        let googleProfile  = googleUser.getBasicProfile();\n\n        this.setUsername(googleProfile.getName());\n        this.setIdToken(googleResponse.id_token);\n        this.setExpiresAt(googleResponse.expires_at);\n        this.setProvider(AuthType.GOOGLE);\n        this.updateCredentials();\n\n        this.onSignIn.emit();\n        let response = new CognitoServiceResponse(RespType.ON_SUCCESS, googleProfile);\n        return resolve(response);\n      }, (onRejected : any) =>\n      {\n        // Can be : popup_blocked_by_browser\n        console.error('CognitoService : authenticateGoogleUser -> signIn', onRejected);\n        let response = new CognitoServiceResponse(RespType.ON_REJECTED, onRejected);\n        return reject(response);\n      }).catch((err) =>\n      {\n        console.error('CognitoService : authenticateGoogleUser -> signIn', err);\n        let response = new CognitoServiceResponse(RespType.ON_FAILURE, err);\n        return reject(response);\n      });\n    });\n  }\n\n  private refreshGoogleSession() : Promise<CognitoServiceResponse>\n  {\n    let googleUser : gapi.auth2.GoogleUser = null;\n    googleUser = this.googleAuth.currentUser.get();\n\n    return new Promise((resolve, reject) =>\n    {\n      googleUser.reloadAuthResponse().then((res : gapi.auth2.AuthResponse) =>\n      {\n        this.setIdToken(res.id_token);\n        this.setExpiresAt(res.expires_at);\n        this.updateCredentials();\n\n        let response = new CognitoServiceResponse(RespType.ON_SUCCESS, res);\n        return resolve(response);\n      }).catch(err =>\n      {\n        console.error('CognitoService : refreshGoogleSession -> reloadAuthResponse', err);\n        let response = new CognitoServiceResponse(RespType.ON_FAILURE, err);\n        return reject(response);\n      });\n    });\n  }\n\n  private signOutGoogle() : void\n  {\n    this.googleAuth.signOut().then(_ =>\n    {\n      this.googleAuth.disconnect();\n    });\n  }\n\n  // !SECTION\n\n  // -------------------------------------------------------------------------------------------\n  // TODO: Facebook ----------------------------------------------------------------------------\n  // -------------------------------------------------------------------------------------------\n\n  // -------------------------------------------------------------------------------------------\n  // SECTION: Private helpers ------------------------------------------------------------------\n  // -------------------------------------------------------------------------------------------\n\n  // NOTE: User --------------------------------------------------------------------------------\n\n  private setCognitoUser(username : string) : AWSCognito.CognitoUser\n  {\n    let cognitoUser : AWSCognito.CognitoUser = null;\n    let cognitoUserPool = new AWSCognito.CognitoUserPool(this.poolData);\n\n    let userData : AWSCognito.ICognitoUserData = {\n      Username   : username,\n      Pool       : cognitoUserPool\n    };\n    cognitoUser = new AWSCognito.CognitoUser(userData);\n\n    this.cognitoUser = cognitoUser; // Store the user in the service\n    this.setUsername(username); // Store the username in the local storage\n\n    return cognitoUser;\n  }\n\n  // NOTE: Session -----------------------------------------------------------------------------\n\n  private setExpiresAt(expiresAt : number) : void\n  {\n    let storageKey : string = null;\n    storageKey = this.storagePrefix + 'ExpiresAt';\n    localStorage.setItem(storageKey, expiresAt.toString());\n  }\n\n  // NOTE: Username ----------------------------------------------------------------------------\n\n  private setUsername(username : string) : void\n  {\n    let storageKey : string = null;\n    storageKey = this.storagePrefix + 'Username';\n    localStorage.setItem(storageKey, username);\n  }\n\n  // NOTE: Provider ----------------------------------------------------------------------------\n\n  private setProvider(provider : string) : void\n  {\n    let storageKey : string = null;\n    storageKey = this.storagePrefix + 'Provider';\n    localStorage.setItem(storageKey, provider);\n  }\n\n  // NOTE: Token -------------------------------------------------------------------------------\n\n  private setIdToken(token : string) : void\n  {\n    let storageKey : string = null;\n    storageKey = this.storagePrefix + 'IdToken';\n    localStorage.setItem(storageKey, token);\n  }\n\n  private setTokens(session : AWSCognito.CognitoUserSession) : void\n  {\n    let storageKey : string = null;\n    let tokensStr  : string = null;\n    let tokensObj  : any    = null;\n\n    storageKey = this.storagePrefix + 'SessionTokens';\n    tokensObj  = {\n      accessToken          : session.getAccessToken().getJwtToken(),\n      accessTokenExpiresAt : session.getAccessToken().getExpiration() * 1000, // Seconds to milliseconds\n      idToken              : session.getIdToken().getJwtToken(),\n      idTokenExpiresAt     : session.getIdToken().getExpiration() * 1000, // Seconds to milliseconds\n      refreshToken         : session.getRefreshToken().getToken()\n    };\n    tokensStr = JSON.stringify(tokensObj);\n    localStorage.setItem(storageKey, tokensStr);\n  }\n\n  private updateTokens(session : AWSCognito.CognitoUserSession) : void\n  {\n    let tokens : any = null;\n    this.setTokens(session);\n    tokens = this.getTokens();\n    this.setIdToken(tokens.idToken);\n    this.setExpiresAt(tokens.idTokenExpiresAt);\n  }\n\n  // NOTE: Storage -----------------------------------------------------------------------------\n\n  private clearStorage() : void\n  {\n    localStorage.removeItem(this.storagePrefix + 'Username');\n    localStorage.removeItem(this.storagePrefix + 'Provider');\n    localStorage.removeItem(this.storagePrefix + 'IdToken');\n    localStorage.removeItem(this.storagePrefix + 'ExpiresAt');\n    localStorage.removeItem(this.storagePrefix + 'SessionTokens');\n  }\n\n  // !SECTION\n\n}\n"],"names":["AWS.STS","AWS.config","AWS.CognitoIdentityCredentials","AWSCognito.CognitoUserPool","AWS.CognitoIdentityServiceProvider","AWS.Credentials","AWSCognito.AuthenticationDetails","AWSCognito.CognitoRefreshToken","AWSCognito.CognitoUser"],"mappings":"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"}
